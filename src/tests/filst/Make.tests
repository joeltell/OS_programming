# -*- makefile -*-

tests/%.output: FSDISK = 2
tests/%.output: PUTFILES = $(filter-out os.dsk, $^)

tests/filst_TESTS = $(addprefix tests/filst/,sc-bad-write sc-bad-close sc-bad-nr-1 sc-bad-nr-2 sc-bad-nr-3 sc-bad-align sc-bad-exit)

tests/filst_PROGS = $(tests/filst_TESTS)

# Semi-automatic magic.
$(foreach prog,$(tests/filst_PROGS),$(eval $(prog)_SRC += $(prog).c))
$(foreach prog,$(tests/filst_PROGS),$(eval $(prog)_SRC += tests/main.c))
$(foreach prog,$(tests/filst_PROGS),$(eval $(prog)_SRC += tests/lib.c))

